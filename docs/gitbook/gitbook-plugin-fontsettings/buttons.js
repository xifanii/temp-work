require(["gitbook","lodash","jQuery"],function(i,s,n){var o,l={white:0,sepia:1,night:2},f={serif:0,sans:1};function c(){i.storage.set("fontState",o),u()}function r(t){t.preventDefault(),4<=o.size||(o.size++,c())}function m(t){t.preventDefault(),o.size<=0||(o.size--,c())}function h(t,e){e.preventDefault(),o.family=t,c()}function d(t,e){e.preventDefault();var a=n(".book");0!==o.theme&&a.removeClass("color-theme-"+o.theme),o.theme=t,0!==o.theme&&a.addClass("color-theme-"+o.theme),c()}function u(){var t=i.state.$book;n(".font-settings .font-family-list li").removeClass("active"),n(".font-settings .font-family-list li:nth-child("+(o.family+1)+")").addClass("active"),t[0].className=t[0].className.replace(/\bfont-\S+/g,""),t.addClass("font-size-"+o.size),t.addClass("font-family-"+o.family),0!==o.theme&&(t[0].className=t[0].className.replace(/\bcolor-theme-\S+/g,""),t.addClass("color-theme-"+o.theme))}i.events.bind("start",function(t,e){var a=e.fontsettings;i.toolbar.createButton({icon:"fa fa-font",label:"Font Settings",className:"font-settings",dropdown:[[{text:"A",className:"font-reduce",onClick:m},{text:"A",className:"font-enlarge",onClick:r}],[{text:"Serif",onClick:s.partial(h,0)},{text:"Sans",onClick:s.partial(h,1)}],[{text:"White",onClick:s.partial(d,0)},{text:"Sepia",onClick:s.partial(d,1)},{text:"Night",onClick:s.partial(d,2)}]]}),function(t){i.state.$book.find(".book-body"),o=i.storage.get("fontState",{size:t.size||2,family:f[t.family||"sans"],theme:l[t.theme||"white"]}),u()}(a)})});